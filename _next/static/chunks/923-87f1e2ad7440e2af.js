"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[923],{2881:function(e,t,r){var n=r(7437),o=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,a]=(0,o.useState)(null),i=e=>{r&&r!==e?(console.log("close action will handle"),t(),a(null)):(a(e),setTimeout(()=>{a(null)},5e3))};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>i("top")}),(0,n.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>i("bottom")})]})}},8422:function(e,t,r){var n=r(7437),o=r(2265);t.Z=e=>{let{isFullScreen:t,children:r}=e,a=(0,o.useRef)(null);(0,o.useEffect)(()=>{t?i():l()},[t]);let i=async()=>{try{if(a.current){let e=a.current;e.requestFullscreen?await e.requestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Error trying to enter fullscreen mode:",e)}},l=async()=>{try{document.fullscreenElement&&(document.exitFullscreen?await document.exitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen())}catch(e){console.error("Error trying to exit fullscreen mode:",e)}};return(0,n.jsx)("div",{ref:a,style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:r})}},3896:function(e,t,r){r.d(t,{_:function(){return n}});let n=""},6501:function(e,t,r){r.d(t,{Y:function(){return o},g:function(){return n}});let n={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},o={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},6105:function(e,t,r){r.d(t,{l:function(){return n},o:function(){return o}});let n=e=>new Promise((t,r)=>{let n=new FileReader;n.onloadend=()=>{n.result?t(n.result.split(",")[1]):r("Failed to convert file to base64")},n.onerror=()=>{r("File reading error")},n.readAsDataURL(e)});function o(e,t,r){let n=atob(e.split(",")[1]||e),o=n.length,a=new Uint8Array(o);for(let e=0;e<o;e++)a[e]=n.charCodeAt(e);let i=new Blob([a],{type:t});if(!r){let e=t.split("/")[1]||"file";r="file.".concat(e)}return new File([i],r,{type:t})}},2894:function(e,t,r){r.d(t,{Sv:function(){return n}});let n=(e,t)=>{let r=new Blob([JSON.stringify(e,null,2)],{type:"application/json"}),n=window.URL.createObjectURL(r),o=document.createElement("a");o.setAttribute("href",n),o.setAttribute("download",t),o.click(),window.URL.revokeObjectURL(n)}},6849:function(e,t,r){r.d(t,{Z:function(){return m}});var n=r(7437),o=r(6501),a=r(6105),i=r(2807),l=r(3896),c=r(1100),s=r(9089),u=r(3145),d=e=>{let{show:t,onRequestClose:r}=e;return(0,n.jsx)(c.p,{show:t,slideBottom:!0,onRequestClose:r,children:(0,n.jsx)("div",{className:"fixed inset-0 w-full h-full flex items-center justify-center overflow-y-auto bg-black bg-opacity-50 backdrop-blur-sm z-50",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-xl shadow-2xl p-8 space-y-6",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)(s.a4m,{className:"w-8 h-8 text-red-500 shrink-0"}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-2xl font-bold text-gray-900",children:"No Camera Access"}),(0,n.jsx)("p",{className:"text-gray-600 mt-1",children:"Camera access is required to continue. Please allow camera permission in your browser settings."})]})]}),(0,n.jsxs)("div",{className:"relative flex flex-col items-center mt-4",children:[(0,n.jsxs)("div",{className:"w-full flex flex-col items-center",children:[(0,n.jsx)(u.default,{src:"".concat(l._,"/image/arrow.png"),width:50,height:50,alt:"camera",className:"w-20 h-20 rounded-2xl rotate-[150deg]"}),(0,n.jsx)("div",{className:"relative w-auto h-96 flex items-center justify-center",children:(0,n.jsx)(u.default,{src:"".concat(l._,"/image/camera-access.png"),width:200,height:200,alt:"camera",className:"w-full h-full rounded-2xl"})})]}),(0,n.jsx)("span",{className:"text-green-500/80 text-sm mt-2",children:"After allowing, please refresh the page."})]}),(0,n.jsx)("div",{className:"flex justify-end gap-3 mt-6",children:(0,n.jsx)("button",{onClick:r,className:"px-5 py-2.5 text-gray-700 bg-gray-100 hover:bg-gray-200 rounded-lg font-medium transition-colors",children:"Close"})})]})})})})},f=r(2265),m=()=>{let e=(0,f.useRef)(null),t=(0,f.useRef)([]),[r,l]=(0,f.useState)(!1),[c,s]=(0,f.useState)(null),[u,m]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{(async()=>{try{if(navigator.permissions){let e=await navigator.permissions.query({name:"camera"});"denied"===e.state&&m(!0),e.onchange=()=>{"denied"===e.state?m(!0):m(!1)}}else try{await navigator.mediaDevices.getUserMedia({video:!0})}catch(e){m(!0)}}catch(e){m(!0)}})()},[]),{isRecording:r,startVidRecording:async()=>{if(!u)try{let r=await navigator.mediaDevices.getUserMedia({video:!0,audio:!1});s(r),e.current=new MediaRecorder(r,{mimeType:"video/webm"}),e.current.ondataavailable=e=>{e.data.size>0&&t.current.push(e.data)},e.current.start(),l(!0)}catch(e){console.error("Error accessing media devices.",e),m(!0)}},stopVidRecording:()=>new Promise(r=>{e.current?(e.current.stop(),e.current.onstop=async()=>{let e=new Blob(t.current,{type:"video/webm"});try{let n=new File([e],"video.webm",{type:"video/webm"}),u=await (0,a.l)(n);await (0,i.TP)(o.Y.temporaryDB,o.Y.tempVideo,u),t.current=[],l(!1),c&&(c.getTracks().forEach(e=>e.stop()),s(null)),r(u)}catch(e){console.error("Error converting video to base64:",e),r(null)}}):r(null)}),CameraPermissionPopupUI:(0,n.jsx)(d,{show:u,onRequestClose:()=>m(!1)})}}},2762:function(e,t,r){r.d(t,{Z:function(){return o}});var n=r(2265);function o(){let[e,t]=(0,n.useState)({width:void 0,height:void 0}),[r,o]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&o(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let a="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,i="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:a,isDesktop:i,deviceType:r}}},2635:function(e,t,r){r.d(t,{SurveyProvider:function(){return p},y:function(){return w}});var n=r(7437),o=r(6501);let{childID:a,childDOB:i,childGender:l,observerId:c}=(0,r(7727).jy)(o.g.LOGGED_IN_USER,!0)||{},s=e=>({assestment_id:e,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:""});s("BubblePoppingTask"),s("MotorFollowingTask"),s("ButtonTask");let u=["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]={...s(t),userID:a,userDOB:i,userGender:l,observerId:c},e),{});var d=r(2807),f=r(2265);let m=(0,f.createContext)(void 0),v=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};default:return{...e}}},p=e=>{let{children:t}=e,[r,a]=(0,f.useReducer)(v,u),[i,l]=(0,f.useState)(!1);return(0,f.useEffect)(()=>{(async()=>{try{let e=await (0,d.VS)(o.Y.surveyDB,o.Y.surveyData);e&&!i&&a({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{l(!0)}})()},[i]),(0,f.useEffect)(()=>{i&&(async()=>{try{await (0,d.TP)(o.Y.surveyDB,o.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,i]),(0,n.jsx)(m.Provider,{value:{state:r,dispatch:a},children:t})},w=()=>{let e=(0,f.useContext)(m);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},2807:function(e,t,r){function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,n)=>{let o=indexedDB.open(e,t);o.onsuccess=()=>r(o.result),o.onerror=()=>n("Failed to open database: ".concat(e)),o.onupgradeneeded=()=>{let e=o.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function o(e,t,r){try{let o=await n(e),a=o.transaction("data","readwrite");a.objectStore("data").put(r,t),a.oncomplete=()=>{o.close()},a.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function a(e,t){try{let r=await n(e);return new Promise((n,o)=>{let a=r.transaction("data","readonly").objectStore("data").get(t);a.onsuccess=()=>{let e=a.result;n(e),r.close()},a.onerror=()=>{o("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}async function i(e,t){try{let r=await n(e),o=r.transaction("data","readwrite");o.objectStore("data").delete(t),o.oncomplete=()=>r.close()}catch(t){console.error("Error removing value from ".concat(e,":"),t)}}r.d(t,{TP:function(){return o},VS:function(){return a},pV:function(){return i}}),r(6501)},7727:function(e,t,r){function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function o(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}function a(){"localStorage"in window&&window.localStorage.clear()}r.d(t,{jy:function(){return n},pO:function(){return a},uN:function(){return o}})},1646:function(e,t,r){function n(e){if(!(null==e?void 0:e[468])||!(null==e?void 0:e[473])||!(null==e?void 0:e[33])||!(null==e?void 0:e[263]))return"Invalid landmarks";let t=e[468],r=e[473],n=e[33],o=e[263];function a(e,t){let r=e.x-t.x,n=e.y-t.y;return Math.sqrt(r*r+n*n)}let i=a(t,n),l=a(r,o);return i>l?"left":l>i?"right":"center"}r.d(t,{Kr:function(){return n},z_:function(){return o}});let o=e=>{if(!(null==e?void 0:e[33])||!(null==e?void 0:e[263]))return 0;let t=null==e?void 0:e[33],r=null==e?void 0:e[263];return Math.sqrt(Math.pow(t.x-r.x,2)+Math.pow(t.y-r.y,2))}},3991:function(e,t,r){r.d(t,{H:function(){return o}});let n=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),o=e=>{let t;let r=Date.now(),o=n(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let a=t-r;return{startTime:o,endTime:n(t),timeLimit:e,isTimeOver:a>=e,timeTaken:a}}),stopTimer:()=>{clearTimeout(t);let a=Date.now(),i=a-r;return{startTime:o,endTime:n(a),timeLimit:e,isTimeOver:i>=e,timeTaken:i}}}}},6231:function(e,t,r){r.d(t,{w_:function(){return u}});var n=r(2265),o={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(o),i=["attr","size","title"];function l(){return(l=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function c(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function s(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?c(Object(r),!0).forEach(function(t){var n,o;n=t,o=r[t],(n=function(e){var t=function(e,t){if("object"!=typeof e||!e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t||"default");if("object"!=typeof n)return n;throw TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"==typeof t?t:t+""}(n))in e?Object.defineProperty(e,n,{value:o,enumerable:!0,configurable:!0,writable:!0}):e[n]=o}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):c(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))})}return e}function u(e){return t=>n.createElement(d,l({attr:s({},e.attr)},t),function e(t){return t&&t.map((t,r)=>n.createElement(t.tag,s({key:r},t.attr),e(t.child)))}(e.child))}function d(e){var t=t=>{var r,{attr:o,size:a,title:c}=e,u=function(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r={};for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(t.indexOf(n)>=0)continue;r[n]=e[n]}return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}(e,i),d=a||t.size||"1em";return t.className&&(r=t.className),e.className&&(r=(r?r+" ":"")+e.className),n.createElement("svg",l({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,o,u,{className:r,style:s(s({color:e.color||t.color},t.style),e.style),height:d,width:d,xmlns:"http://www.w3.org/2000/svg"}),c&&n.createElement("title",null,c),e.children)};return void 0!==a?n.createElement(a.Consumer,null,e=>t(e)):t(o)}}}]);