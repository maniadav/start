(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[429],{9753:function(e,t,r){Promise.resolve().then(r.bind(r,4598))},4598:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return x}});var n=r(7437),a=r(2265),o=r(1789),s=r(6463),i=r(6648),l=r(970),c=r(5345),u=r(2462),d=r(8002),m=r(7196),f=e=>{let{handleCloseGame:t}=e,[r,o]=(0,a.useState)(!1),s=(0,a.useRef)(null),i=(0,a.useRef)([]),l=(0,a.useRef)(null),c=async()=>{let e=new MediaRecorder(await navigator.mediaDevices.getUserMedia({audio:!0}));s.current=e,e.ondataavailable=e=>{i.current.push(e.data)},e.onstop=()=>{let e=new Blob(i.current,{type:"audio/mp3"});URL.createObjectURL(e);let r=new FileReader;r.readAsDataURL(e),r.onloadend=()=>{t(r.result)},i.current=[]},e.start(),o(!0)},u=()=>{s.current&&s.current.stop(),o(!1),l.current&&(clearInterval(l.current),l.current=null)};return(0,n.jsx)("button",{onClick:()=>{r?u():c()},className:"h-32 px-4 py-1 w-auto items-center justify-center border border-black shadow-lg rounded-full text-white ".concat(r?"bg-red-800":"bg-blue-800"),children:r?(0,n.jsx)(m.Z,{icon:"fluent:mic-pulse-16-filled"}):(0,n.jsx)(m.Z,{icon:"ri:mic-2-line"})})},h=r(232),g=r(8582),v=r(1334),p=e=>{let{isSurvey:t=!1}=e,[r,o]=(0,a.useState)(!1),[m,p]=(0,a.useState)(!1),[w,y]=(0,a.useState)(),[x,b]=(0,a.useState)(null),[S,k]=(0,a.useState)({}),{windowSize:T,deviceType:j}=(0,d.Z)(),{state:E,dispatch:N}=(0,u.y)(),D=parseInt((0,s.useSearchParams)().get("attempt")||"0"),_=D<3?"".concat(v._,"/").concat(g.kg.surveyRoute,"?attempt=").concat(D+1):null;(0,a.useEffect)(()=>{t&&C()},[t]),(0,a.useEffect)(()=>{(null==x?void 0:x.isTimeOver)&&!m&&(L(x),p(!0))},[m,x]);let C=()=>{R()},A=(0,a.useRef)(),R=()=>{let{endTimePromise:e,stopTimer:t}=(0,c.H)(18e4);return A.current=t,e.then(b),()=>{A.current&&A.current()}},O=(0,a.useCallback)(()=>{if(A.current)return A.current()},[]),L=(0,a.useCallback)(function(e,r){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];t&&(o(!0),console.log({timeData:e}),k(t=>{let a={...t,timeTaken:(null==e?void 0:e.timeTaken)||"",timeLimit:(null==e?void 0:e.timeLimit)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,screenHeight:T.height,screenWidth:T.width,audio:r||"",deviceType:j,closedMidWay:n};return N({type:"UPDATE_SURVEY_DATA",attempt:D,task:g.kg.id,data:a}),a}))},[t,x,D,w]);return(0,n.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[t&&(0,n.jsx)(h.Z,{handlePressAction:()=>{L(O(),"",!0)}}),(0,n.jsx)("div",{className:"relative h-screen w-full",children:(0,n.jsx)(i.default,{src:"".concat(v._,"/image/langaugesampling.png"),layout:"fill",objectFit:"contain",alt:"langaugesampling.png",className:"h-screen w-auto"})}),t&&(0,n.jsx)("div",{className:"fixed bottom-12 right-1/2",children:(0,n.jsx)(f,{handleCloseGame:e=>{console.log(e),t?L(O(),e):alert("you may start the game!")}})}),t&&(0,n.jsx)(l.Z,{showFilter:r,msg:g.kg.taskMessage,testName:g.kg.title,reAttemptUrl:_})]})},w=r(8214);let y=()=>{let[e,t]=(0,a.useState)(!1),r=()=>{t(!e)};return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)("div",{className:"w-full h-full overflow-hidden",children:(0,n.jsx)(p,{isSurvey:!0})}):(0,n.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,n.jsx)(o.Z,{taskName:g.kg.title,taskMessage:g.kg.taskMessage,handleStartGame:()=>r()}),(0,n.jsx)(p,{})]})})};function x(){return(0,n.jsx)(w.Z,{children:(0,n.jsx)(y,{})})}},232:function(e,t,r){"use strict";var n=r(7437),a=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,o]=(0,a.useState)(null),s=e=>{r&&r!==e?(console.log("close action will handle"),t(),o(null)):(o(e),setTimeout(()=>{o(null)},5e3))};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>s("top")}),(0,n.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>s("bottom")})]})}},970:function(e,t,r){"use strict";var n=r(7437),a=r(9891),o=r(6463);t.Z=e=>{let{showFilter:t,msg:r,testName:s,reAttemptUrl:i}=e,l=(0,o.useRouter)();return(0,n.jsx)(a.p,{show:t,slideBottom:!0,children:(0,n.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,n.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(s," Test Completed!!")}),(0,n.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>l.push("/survey"),children:[(0,n.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,n.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,n.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,n.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,n.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,n.jsx)("button",{onClick:()=>l.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),i&&(0,n.jsx)("button",{onClick:()=>{window.location&&(window.location.href=i)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},1334:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});let n="/start"},7257:function(e,t,r){"use strict";r.d(t,{Y:function(){return a},g:function(){return n}});let n={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},a={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},8002:function(e,t,r){"use strict";r.d(t,{Z:function(){return a}});var n=r(2265);function a(){let[e,t]=(0,n.useState)({width:void 0,height:void 0}),[r,a]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&a(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let o="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,s="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:o,isDesktop:s,deviceType:r}}},2462:function(e,t,r){"use strict";r.d(t,{SurveyProvider:function(){return h},y:function(){return g}});var n=r(7437),a=r(7257);let{childID:o,childDOB:s,childGender:i}=(0,r(7413).jy)(a.g.LOGGED_IN_USER,!0)||{},l=e=>({assestment_id:e,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:""});l("BubblePoppingTask"),l("MotorFollowingTask"),l("ButtonTask");let c=["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]={...l(t),userID:o,userDOB:s,userGender:i},e),{});var u=r(1064),d=r(2265);let m=(0,d.createContext)(void 0),f=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};default:return{...e}}},h=e=>{let{children:t}=e,[r,o]=(0,d.useReducer)(f,c),[s,i]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,u.VS)(a.Y.surveyDB,a.Y.surveyData);e&&!s&&o({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{i(!0)}})()},[s]),(0,d.useEffect)(()=>{s&&(async()=>{try{await (0,u.TP)(a.Y.surveyDB,a.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,s]),(0,n.jsx)(m.Provider,{value:{state:r,dispatch:o},children:t})},g=()=>{let e=(0,d.useContext)(m);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},1064:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,n)=>{let a=indexedDB.open(e,t);a.onsuccess=()=>r(a.result),a.onerror=()=>n("Failed to open database: ".concat(e)),a.onupgradeneeded=()=>{let e=a.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function a(e,t,r){try{let a=await n(e),o=a.transaction("data","readwrite");o.objectStore("data").put(r,t),o.oncomplete=()=>{a.close()},o.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function o(e,t){try{let r=await n(e);return new Promise((n,a)=>{let o=r.transaction("data","readonly").objectStore("data").get(t);o.onsuccess=()=>{let e=o.result;n(e),r.close()},o.onerror=()=>{a("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}async function s(e,t){try{let r=await n(e),a=r.transaction("data","readwrite");a.objectStore("data").delete(t),a.oncomplete=()=>r.close()}catch(t){console.error("Error removing value from ".concat(e,":"),t)}}r.d(t,{TP:function(){return a},VS:function(){return o},pV:function(){return s}}),r(7257)},7413:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function a(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}function o(){"localStorage"in window&&window.localStorage.clear()}r.d(t,{jy:function(){return n},pO:function(){return o},uN:function(){return a}})},5345:function(e,t,r){"use strict";r.d(t,{H:function(){return a}});let n=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),a=e=>{let t;let r=Date.now(),a=n(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let o=t-r;return{startTime:a,endTime:n(t),timeLimit:e,isTimeOver:o>=e,timeTaken:o}}),stopTimer:()=>{clearTimeout(t);let o=Date.now(),s=o-r;return{startTime:a,endTime:n(o),timeLimit:e,isTimeOver:s>=e,timeTaken:s}}}}}},function(e){e.O(0,[231,812,648,642,971,275,744],function(){return e(e.s=9753)}),_N_E=e.O()}]);