(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[552],{4201:function(e,t,r){Promise.resolve().then(r.bind(r,1859))},1859:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return j}});var n=r(7437),o=r(2265),l=r(1789),i=r(8214),a=r(8002);let s=e=>{let{prevPoint:t,currentPoint:r,ctx:n,color:o,newlineWidth:l}=e,{x:i,y:a}=r,s=null!=t?t:r;n.lineJoin="round",n.lineCap="round",n.lineWidth=l,n.strokeStyle=o,n.fillStyle=o,n.beginPath(),n.moveTo(s.x,s.y),n.lineTo(i,a),n.stroke(),n.fill()};var u=r(5345),c=r(970),d=r(6463),h=r(2462);let f=null;var m=r(6648);let g=(0,o.createContext)(void 0),v=e=>{let{children:t}=e,[r,l]=(0,o.useState)([{x:0,y:0}]),[i,a]=(0,o.useState)([{x:0,y:0}]);return(0,n.jsx)(g.Provider,{value:{ballCoordinates:r,setBallCoordinates:l,mouseCoordinates:i,setMouseCoordinates:a},children:t})},w=()=>{let e=(0,o.useContext)(g);if(!e)throw Error("component not under context provider");return e};var x=e=>{let{width:t,height:r,attempt:l}=e,i=(0,o.useRef)(null),a=(0,o.useRef)(null),{setBallCoordinates:s}=w(),u=e=>1.5*(Math.sin((1+.5*l)*.3*e)+Math.sin(.54*e)),c=e=>(1-Math.cos(e*Math.PI*2))*.5+.5*e;return(0,o.useEffect)(()=>{if(!i.current||!a.current)return;let e=i.current,n=a.current,o="M 0 ".concat(r/2);for(let e=0;e<t;e++){let t=r/2+100*u(.02*e);o+=" L ".concat(e," ").concat(t)}e.setAttribute("d",o);let l=null,d=t=>{l||(l=t);let r=c((t-l)/6e4);if(r>=1){let t=e.getTotalLength(),r=e.getPointAtLength(t);n.setAttribute("cx",r.x.toString()),n.setAttribute("cy",r.y.toString());return}let o=e.getTotalLength(),i=e.getPointAtLength(Math.min(r,1)*o);n.setAttribute("cx",i.x.toString()),n.setAttribute("cy",i.y.toString()),s(e=>[...e||[],{x:Number(i.x.toFixed(2)),y:Number(i.y.toFixed(2))}]),requestAnimationFrame(d)};requestAnimationFrame(d)},[t,r]),(0,n.jsxs)("svg",{width:"100%",height:r,children:[(0,n.jsx)("path",{ref:i,id:"sineWave",strokeWidth:"2",fill:"transparent"}),(0,n.jsx)("circle",{ref:a,id:"ball",cx:"0",cy:"0",r:"25",fill:"red"})]})},p=r(5783),y=r(232),S=r(8582),b=r(1334);function E(e){let{isSurvey:t=!1}=e,[r,l]=(0,o.useState)(!0),[i,g]=(0,o.useState)(!1),[v,E]=(0,o.useState)([0]),[k,T]=(0,o.useState)([0]),[j,N]=(0,o.useState)([0]),[D,C]=(0,o.useState)([0]),[A,F]=(0,o.useState)([0]),[L,_]=(0,o.useState)([{x:0,y:0}]),[R,P]=(0,o.useState)([]),[M,O]=(0,o.useState)([]),[U,z]=(0,o.useState)(!1),[I,B]=(0,o.useState)(!1),[Y,Z]=(0,o.useState)(!1),[q,V]=(0,o.useState)(!1),[W,G]=(0,o.useState)(null),{canvasRef:H,onInteractStart:J}=function(e){let t=(0,o.useRef)(null),r=(0,o.useRef)(null),[n,l]=(0,o.useState)(!1),i=(0,o.useCallback)(()=>{l(!0)},[]),a=(0,o.useCallback)(e=>{e.preventDefault(),l(!0)},[]);return(0,o.useEffect)(()=>{let o=t.current;function i(o){if(!n)return;let l=t.current,i=null==l?void 0:l.getContext("2d"),a=s(o);i&&a&&(e({ctx:i,currentPoint:a,prevPoint:r.current}),r.current=a)}let s=e=>{let r=t.current;if(!r)return;let n=r.getBoundingClientRect();return{x:e instanceof MouseEvent?e.clientX-n.left:e.touches[0].clientX-n.left,y:e instanceof MouseEvent?e.clientY-n.top:e.touches[0].clientY-n.top}};function u(){l(!1),r.current=null}return window.addEventListener("mouseup",u),null==o||o.addEventListener("mousemove",i),window.addEventListener("mousedown",i),null==o||o.addEventListener("touchmove",i,{passive:!1}),null==o||o.addEventListener("touchend",u),null==o||o.addEventListener("touchstart",a,{passive:!1}),()=>{window.removeEventListener("mouseup",u),null==o||o.removeEventListener("mousemove",i),window.removeEventListener("mousedown",i),null==o||o.removeEventListener("touchmove",i),null==o||o.removeEventListener("touchend",u),null==o||o.removeEventListener("touchstart",a)}},[n,e]),{canvasRef:t,onInteractStart:i}}(function(e){let{prevPoint:t,currentPoint:r,ctx:n}=e;U&&r&&t&&(s({prevPoint:t,currentPoint:r,ctx:n,color:ei,newlineWidth:3}),O(e=>[...e,r]),_(e=>[...e,{x:r.x,y:r.y}]))}),{state:K,dispatch:X}=(0,h.y)(),{windowSize:Q,deviceType:$}=(0,a.Z)(),ee=(0,d.useSearchParams)(),{ballCoordinates:et}=w(),er=(0,p.Z)("".concat(b._,"/audio/audio-caught.wav")),en=(0,o.useRef)(et),eo=(0,o.useRef)(L),el=(0,o.useRef)(null),ei="#000000",ea=parseInt(ee.get("attempt")||"0"),es=ea<3?"/".concat(S.iS.surveyRoute,"?attempt=").concat(ea+1):null,eu=Date.now(),ec=(0,o.useRef)();(0,o.useEffect)(()=>{en.current=et},[et]),(0,o.useEffect)(()=>{eo.current=L,Q.width&&et[et.length-1].x-25<L[L.length-1].x&&L[L.length-1].x<et[et.length-1].x&&et[et.length-1].y-25<L[L.length-1].y&&L[L.length-1].y<et[et.length-1].y&&Q.width-25<L[L.length-1].x&&(er(),Z(!0))},[L]),(0,o.useEffect)(()=>{let e=setInterval(()=>{let r=Date.now()-eu;if(Y||!t){ey(ex(),!0),clearInterval(e);return}let n=eo.current[eo.current.length-1],o=en.current[en.current.length-1],{x:l,y:i}=n,{x:a,y:s}=o;N(e=>[...e,l]),F(e=>[...e,i]),E(e=>[...e,r]),T(e=>[...e,a]),C(e=>[...e,s])},20);return()=>clearInterval(e)},[Y,t]);let ed=(0,o.useCallback)((e,t)=>{e.width=window.innerWidth,e.height=window.innerHeight},[]);(0,o.useEffect)(()=>{let e=H.current;if(e){let t=e.getContext("2d");if(t){ed(e,t);let r=()=>{t.clearRect(0,0,e.width,e.height),R.forEach(e=>{e.forEach((r,n)=>{0!==n&&s({prevPoint:e[n-1],currentPoint:r,ctx:t,color:ei,newlineWidth:3})})}),M.forEach((e,r)=>{0!==r&&s({prevPoint:M[r-1],currentPoint:e,ctx:t,color:ei,newlineWidth:3})}),el.current=requestAnimationFrame(r)};r()}}return()=>{el.current&&cancelAnimationFrame(el.current)}},[R,M,Q,ed]);let eh=()=>{z(!0),O([]),J(),l(!1)},ef=()=>{z(!1),P(e=>[...e,M])},[em,eg]=(0,o.useState)(null),ev=()=>{let e=H.current;if(e){let t=e.getContext("2d");t&&et.forEach(e=>{t.beginPath(),t.arc(e.x,e.y,2,0,2*Math.PI),t.fillStyle="blue",t.fill()});let r=e.toDataURL("image/png"),n=document.createElement("a");return n.download="drawing.png",n.href=r,n.click(),r}},ew=()=>{let{endTimePromise:e,stopTimer:t}=(0,u.H)(18e4);return ec.current=t,e.then(G),()=>{ec.current&&ec.current()}},ex=(0,o.useCallback)(()=>{if(ec.current)return ec.current()},[]),ep=()=>{ew(),function(e){if("start"===e)f=new Date;else if("end"===e&&f){let e=new Date().getTime()-f.getTime(),t=(e%6e4/1e3).toFixed(0);"".concat(Math.floor(e/6e4)," minutes and ").concat(t," seconds")}}("start"),g(e=>({...e}))},ey=(0,o.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(ev(),B(e=>!e),g(t=>{let n={...t,timeTaken:e.timeTaken,timrLimit:(null==e?void 0:e.timeLimit)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,touchX:j,touchY:A,objX:k,objY:D,time:v,screenHeight:Q.height,screenWidth:Q.width,deviceType:$,closedMidWay:r};return X({type:"UPDATE_SURVEY_DATA",attempt:ea,task:S.iS.id,data:n}),n}))},[t,W,ea,I,j,A,k,D,v]);return((0,o.useEffect)(()=>{t&&ep()},[]),Q.height&&void 0!==Q.width)?(0,n.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[t&&(0,n.jsx)(y.Z,{handlePressAction:()=>{ey(ex(),!0)}}),t&&(0,n.jsxs)("div",{className:"absolute z-50",children:[(0,n.jsx)("div",{className:"fixed top-4 right-4 flex flex-col space-y-2",children:(0,n.jsx)("button",{className:"px-4 py-2 bg-blue-500 text-white rounded hover:bg-blue-700",onClick:ey,children:"Save"})}),(0,n.jsx)(c.Z,{showFilter:I,msg:S.iS.taskEndMessage,testName:S.iS.title,reAttemptUrl:es})]}),(0,n.jsx)("canvas",{id:"canvas",width:Q.width,height:Q.height,ref:H,onMouseDown:eh,onMouseUp:ef,onTouchStart:eh,onTouchEnd:ef,className:"z-40 absolute top-0 left-0 w-full h-full cursor-pointer"}),(0,n.jsx)("div",{className:"absolute w-screen h-screen z-30",children:(0,n.jsx)(x,{width:Q.width,height:Q.height,attempt:ea})}),r&&(0,n.jsx)("div",{id:"arrow-div",className:"z-10 absolute flex items-center top-0 left-0 w-full h-full bg-cover bg-center",children:(0,n.jsx)(m.default,{src:"".concat(b._,"/image/arrow.png"),alt:"arrow",width:100,height:100,className:"absolute rotate-45"})}),(0,n.jsx)("div",{className:"z-0 absolute top-0 left-0 w-full h-full bg-cover bg-center",style:{backgroundImage:"url('".concat(b._,"/image/motor_bg.jpg')")}})]}):null}var k=r(872);let T=()=>{let[e,t]=(0,o.useState)(!1),r=()=>{t(!e)};return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)(k.Z,{isFullScreen:e,children:(0,n.jsx)(E,{isSurvey:!0})}):(0,n.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,n.jsx)(l.Z,{taskName:S.iS.title,taskMessage:S.iS.taskMessage,handleStartGame:()=>r()}),(0,n.jsx)(E,{})]})})};function j(){return(0,n.jsx)(i.Z,{children:(0,n.jsx)(v,{children:(0,n.jsx)(T,{})})})}},232:function(e,t,r){"use strict";var n=r(7437),o=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,l]=(0,o.useState)(null),i=e=>{r&&r!==e?(console.log("close action will handle"),t(),l(null)):(l(e),setTimeout(()=>{l(null)},5e3))};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>i("top")}),(0,n.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>i("bottom")})]})}},872:function(e,t,r){"use strict";var n=r(7437),o=r(2265);t.Z=e=>{let{isFullScreen:t,children:r}=e,l=(0,o.useRef)(null);(0,o.useEffect)(()=>{t?i():a()},[t]);let i=async()=>{try{if(l.current){let e=l.current;e.requestFullscreen?await e.requestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Error trying to enter fullscreen mode:",e)}},a=async()=>{try{document.fullscreenElement&&(document.exitFullscreen?await document.exitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen())}catch(e){console.error("Error trying to exit fullscreen mode:",e)}};return(0,n.jsx)("div",{ref:l,style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:r})}},970:function(e,t,r){"use strict";var n=r(7437),o=r(9891),l=r(6463);t.Z=e=>{let{showFilter:t,msg:r,testName:i,reAttemptUrl:a}=e,s=(0,l.useRouter)();return(0,n.jsx)(o.p,{show:t,slideBottom:!0,children:(0,n.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,n.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(i," Test Completed!!")}),(0,n.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>s.push("/survey"),children:[(0,n.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,n.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,n.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,n.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,n.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,n.jsx)("button",{onClick:()=>s.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),a&&(0,n.jsx)("button",{onClick:()=>{window.location&&(window.location.href=a)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},1334:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});let n="/start"},7257:function(e,t,r){"use strict";r.d(t,{Y:function(){return o},g:function(){return n}});let n={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},o={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},5783:function(e,t,r){"use strict";var n=r(2265);t.Z=e=>{let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(e){let t=new Audio(e);t.preload="auto",r(t)}return()=>{t&&(t.pause(),t.currentTime=0,t.src="")}},[e]),async()=>{if(t)try{await t.play()}catch(e){console.error("Failed to play the audio:",e)}}}},8002:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2265);function o(){let[e,t]=(0,n.useState)({width:void 0,height:void 0}),[r,o]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&o(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let l="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,i="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:l,isDesktop:i,deviceType:r}}},2462:function(e,t,r){"use strict";r.d(t,{SurveyProvider:function(){return m},y:function(){return g}});var n=r(7437),o=r(7257);let{childID:l,childDOB:i,childGender:a}=(0,r(7413).jy)(o.g.LOGGED_IN_USER,!0)||{},s=e=>({assestment_id:e,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:""});s("BubblePoppingTask"),s("MotorFollowingTask"),s("ButtonTask");let u=["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]={...s(t),userID:l,userDOB:i,userGender:a},e),{});var c=r(1064),d=r(2265);let h=(0,d.createContext)(void 0),f=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};default:return{...e}}},m=e=>{let{children:t}=e,[r,l]=(0,d.useReducer)(f,u),[i,a]=(0,d.useState)(!1);return(0,d.useEffect)(()=>{(async()=>{try{let e=await (0,c.VS)(o.Y.surveyDB,o.Y.surveyData);e&&!i&&l({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{a(!0)}})()},[i]),(0,d.useEffect)(()=>{i&&(async()=>{try{await (0,c.TP)(o.Y.surveyDB,o.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,i]),(0,n.jsx)(h.Provider,{value:{state:r,dispatch:l},children:t})},g=()=>{let e=(0,d.useContext)(h);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},1064:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,n)=>{let o=indexedDB.open(e,t);o.onsuccess=()=>r(o.result),o.onerror=()=>n("Failed to open database: ".concat(e)),o.onupgradeneeded=()=>{let e=o.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function o(e,t,r){try{let o=await n(e),l=o.transaction("data","readwrite");l.objectStore("data").put(r,t),l.oncomplete=()=>{o.close()},l.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function l(e,t){try{let r=await n(e);return new Promise((n,o)=>{let l=r.transaction("data","readonly").objectStore("data").get(t);l.onsuccess=()=>{let e=l.result;n(e),r.close()},l.onerror=()=>{o("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}async function i(e,t){try{let r=await n(e),o=r.transaction("data","readwrite");o.objectStore("data").delete(t),o.oncomplete=()=>r.close()}catch(t){console.error("Error removing value from ".concat(e,":"),t)}}r.d(t,{TP:function(){return o},VS:function(){return l},pV:function(){return i}}),r(7257)},7413:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function o(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}function l(){"localStorage"in window&&window.localStorage.clear()}r.d(t,{jy:function(){return n},pO:function(){return l},uN:function(){return o}})},5345:function(e,t,r){"use strict";r.d(t,{H:function(){return o}});let n=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),o=e=>{let t;let r=Date.now(),o=n(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let l=t-r;return{startTime:o,endTime:n(t),timeLimit:e,isTimeOver:l>=e,timeTaken:l}}),stopTimer:()=>{clearTimeout(t);let l=Date.now(),i=l-r;return{startTime:o,endTime:n(l),timeLimit:e,isTimeOver:i>=e,timeTaken:i}}}}}},function(e){e.O(0,[231,812,648,642,971,275,744],function(){return e(e.s=4201)}),_N_E=e.O()}]);