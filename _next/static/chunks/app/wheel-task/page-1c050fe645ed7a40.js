(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[364],{1311:function(e,t,s){Promise.resolve().then(s.bind(s,8678))},8678:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return k}});var l=s(7437),n=s(2265),r=s(3949),a=s(9376),i=s(3991),u=s(2635),c=s(2762),o=s(6849),d=s(2881),h=s(2464),m=s(3896),f=s(6886),v=e=>{let{isSurvey:t=!1}=e,[s,r]=(0,n.useState)(!1),[v,p]=(0,n.useState)(!1),[j,x]=(0,n.useState)(null),[k,w]=(0,n.useState)({}),{windowSize:b,deviceType:g}=(0,c.Z)(),{startVidRecording:y,stopVidRecording:T,CameraPermissionPopupUI:_}=(0,o.Z)(),{state:N,dispatch:S}=(0,u.y)(),E=parseInt((0,a.useSearchParams)().get("attempt")||"0"),P=E<3?"".concat(m._,"/").concat(h.ho.surveyRoute,"?attempt=").concat(E+1):null;(0,n.useEffect)(()=>{t&&Z()},[t]),(0,n.useEffect)(()=>{(null==j?void 0:j.isTimeOver)&&!v&&(D(j),p(!0))},[v,j]);let Z=async()=>{await y(),A()},C=(0,n.useRef)(),A=()=>{let{endTimePromise:e,stopTimer:t}=(0,i.H)(3e4);return C.current=t,e.then(x),()=>{C.current&&C.current()}},O=(0,n.useCallback)(()=>{if(C.current)return C.current()},[]),D=(0,n.useCallback)(async function(e){let s=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(await T(),r(!0),w(t=>{let l={...t,timeLimit:(null==e?void 0:e.timeLimit)||"",timeTaken:(null==e?void 0:e.timeTaken)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,screenHeight:b.height,screenWidth:b.width,deviceType:g,closedMidWay:s};return S({type:"UPDATE_SURVEY_DATA",attempt:E,task:h.ho.id,data:l}),l}))},[t,j,E,b,g]);return(0,l.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[_,t&&(0,l.jsx)(d.Z,{handlePressAction:()=>{D(O(),!0)}}),(0,l.jsx)("div",{className:"relative h-screen w-full",children:(0,l.jsx)("video",{src:"".concat(m._,"/video/wheel.mp4"),className:"absolute top-0 left-0 w-full h-full object-fit",autoPlay:!0,muted:!0,children:(0,l.jsx)("source",{src:"".concat(m._,"/gif/plt.gif"),type:"video/mp4"})})}),(0,l.jsx)("div",{className:"absolute bottom-5 left-5",children:(0,l.jsx)("button",{className:"border border-black shadow-lg rounded-full bg-primary w-16 h-16 px-2 py-1 animate-recPulse ",onClick:()=>{t?D(O()):alert("you may start the game!")}})}),t&&(0,l.jsx)(f.Z,{showFilter:s,onProcessComplete:r,reAttemptUrl:P,attempt:E,taskID:h.ho.id})]})},p=s(1522),j=s(8422);let x=()=>{let[e,t]=(0,n.useState)(!1),s=()=>{t(!e)};return(0,l.jsx)(l.Fragment,{children:e?(0,l.jsx)(j.Z,{isFullScreen:e,children:(0,l.jsx)(v,{isSurvey:e})}):(0,l.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,l.jsx)(r.Z,{taskName:h.ho.title,taskMessage:h.ho.taskMessage,handleStartGame:()=>s()}),(0,l.jsx)(v,{})]})})};function k(){return(0,l.jsx)(p.Z,{children:(0,l.jsx)(x,{})})}}},function(e){e.O(0,[699,972,145,845,386,75,583,334,971,522,744],function(){return e(e.s=1311)}),_N_E=e.O()}]);