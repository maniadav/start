(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[137],{6823:function(e,t,r){Promise.resolve().then(r.bind(r,424))},424:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return p}});var s=r(7437),a=r(9376),n=r(2265),l=r(2464),o=r(8829),u=r(3949),c=r(1522),i=r(9197),d=r.n(i),m=r(5176),h=r(3264),f=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),[r,l]=(0,n.useState)(!1),[o,u]=(0,n.useState)("#000000"),[c,i]=(0,n.useState)([]),[f,g]=(0,n.useState)(!1),x=parseInt((0,a.useSearchParams)().get("attempt")||"0");return(0,n.useEffect)(()=>{let r=e.current;if(r){let e=r.getContext("2d");if(e){e.lineCap="round",e.lineWidth=10,t.current=e;let s=new Image;s.src="/car.png",s.onload=()=>{e.drawImage(s,0,0,r.width,r.height)},c.forEach(t=>{e.strokeStyle=t.color,e.beginPath(),e.moveTo(t.x,t.y),e.lineTo(t.x+1,t.y+1),e.stroke()})}}},[]),(0,n.useEffect)(()=>{console.log(c)},[c]),(0,s.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[(0,s.jsx)("div",{className:"absolute h-full w-full flex justify-center items-center align-middle",children:(0,s.jsx)("canvas",{ref:e,width:600,height:600,className:d().canvas,onMouseDown:e=>{let{nativeEvent:r}=e,{offsetX:s,offsetY:a}=r;t.current&&(t.current.strokeStyle=o,t.current.beginPath(),t.current.moveTo(s,a),l(!0))},onMouseUp:()=>{t.current&&(t.current.closePath(),l(!1))},onMouseMove:e=>{let{nativeEvent:s}=e;if(!r||!t.current)return;let{offsetX:a,offsetY:n}=s;t.current.lineTo(a,n),t.current.stroke(),i([...c,{x:a,y:n,color:o}])}})}),(0,s.jsx)("div",{className:"absolute flex flex-col gap-5 pl-20 pt-20",children:(0,s.jsx)(m.Jr,{clicked:()=>{let t=e.current;if(t){let e=document.createElement("a");e.download="drawing.png",e.href=t.toDataURL(),e.click()}g(!0)},btnIcon:"fluent:save-image-20-filled",customClass:"rounded-full"})}),(0,s.jsx)(h.Z,{showFilter:f,msg:"You have completed the Couring Game Task. You can now make another attempt for this test, go back to the survey dashboard or start the new task. ",testName:"Colouring Game",reAttemptUrl:x<3?"colouring-task?attempt=".concat(x+1):null})]})};let g=["red","green","blue","yellow","purple","orange"],x=()=>{let[e,t]=(0,n.useState)(!1),[r,c]=(0,n.useState)(!1),[i,d]=(0,n.useState)(5),[m,h]=(0,n.useState)(g),[x,p]=(0,n.useState)([]),[b,v]=(0,n.useState)(null),[w,k]=(0,n.useState)({id:"BubblePoppingTask",attempt1:{closedWithError:!1,timeTaken:"",ballCoord:[],mouseCoord:[],colors:[]},attempt2:{},attempt3:{}}),y=(0,a.useSearchParams)();(0,a.useRouter)();let j=y.get("attempt")||"0";(0,o.Z)("/bubble-pop.mp3");let N=l.Ik.BubblePoppingTask;3>parseInt(j)&&parseInt(j),(0,n.useEffect)(()=>{7===i?_():h(g.slice(0,i))},[i]);let C=()=>{P(),t(!e),v(Date.now()),d(1)},_=(0,n.useCallback)(()=>{if(e){c(!0);let e=((Date.now()-b)/1e3).toFixed(2);k(t=>({...t,attempt1:{...t.attempt1,timeTaken:e}}))}},[e,b]);(0,n.useEffect)(()=>{7===i?_():h(g.slice(0,i))},[i,_]);let[S,E]=(0,n.useState)(0),[G,I]=(0,n.useState)(!1),[T,M]=(0,n.useState)(!1);(0,n.useEffect)(()=>{let e;return G&&(e=setInterval(()=>{E(e=>e+1)},1e3)),()=>{e&&clearInterval(e)}},[G]),(0,n.useEffect)(()=>{S>=180&&!T&&(_(),M(!0))},[S,T,_]);let P=()=>{I(!0)};return(0,s.jsx)(s.Fragment,{children:e?(0,s.jsx)("div",{children:(0,s.jsx)(f,{})}):(0,s.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,s.jsx)(u.Z,{taskName:N.title,taskMessage:N.taskMessage,handleStartGame:()=>C()}),(0,s.jsx)(f,{})]})})};function p(){return(0,s.jsx)(c.Z,{children:(0,s.jsx)(x,{})})}},3264:function(e,t,r){"use strict";var s=r(7437),a=r(1100),n=r(9376);t.Z=e=>{let{showFilter:t,msg:r,testName:l,reAttemptUrl:o}=e,u=(0,n.useRouter)();return(0,s.jsx)(a.p,{show:t,slideBottom:!0,children:(0,s.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,s.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,s.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,s.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,s.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(l," Test Completed!!")}),(0,s.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>u.push("/survey"),children:[(0,s.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,s.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,s.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,s.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,s.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,s.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,s.jsx)("button",{onClick:()=>u.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),o&&(0,s.jsx)("button",{onClick:()=>{window.location&&(window.location.href=o)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},8829:function(e,t,r){"use strict";var s=r(2265);t.Z=e=>{let[t,r]=(0,s.useState)(null);return(0,s.useEffect)(()=>{if(e){let t=new Audio(e);t.preload="auto",r(t)}return()=>{t&&(t.pause(),t.currentTime=0,t.src="")}},[e]),async()=>{if(t)try{await t.play()}catch(e){console.error("Failed to play the audio:",e)}}}},9197:function(e){e.exports={container:"ColouringGame_container__IGrGw",canvas:"ColouringGame_canvas__z92yS",controls:"ColouringGame_controls__db474",button:"ColouringGame_button__xzd_b",colorButton:"ColouringGame_colorButton__QuJ7I"}}},function(e){e.O(0,[686,972,845,75,971,522,744],function(){return e(e.s=6823)}),_N_E=e.O()}]);