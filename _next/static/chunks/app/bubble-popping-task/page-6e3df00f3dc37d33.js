(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[148],{6910:function(e,t,r){Promise.resolve().then(r.bind(r,9524))},9524:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return S}});var n=r(7437),o=r(2265),a=r(3949),l=r(1522),s=r(9376),i=e=>{let{color:t,onClick:r,bubbleSize:a,screenWidth:l,screenHeight:s,initialPosition:i}=e,[u,c]=(0,o.useState)(i),[d]=(0,o.useState)(4*Math.random()+2),[m,f]=(0,o.useState)(-1);return(0,o.useEffect)(()=>{let e=setInterval(()=>{c(e=>{let t=e.y+d*m,r=s-a;return t<=0?(f(1),{...e,y:0}):t>=r?(f(-1),{...e,y:r}):{...e,y:t}})},50);return()=>clearInterval(e)},[m,a,s,d]),(0,n.jsx)("div",{className:"cursor-pointer bubble absolute rounded-full block",style:{position:"absolute",top:u.y,left:u.x,backgroundColor:t,width:"".concat(a,"px"),height:"".concat(a,"px"),transform:"translateZ(0)"},onClick:e=>{let n=u.x+a/2,o=(u.y+a/2)/s*100,i=e.clientX/window.innerWidth*100,c=e.clientY/window.innerHeight*100;console.log({ballCoordY:o,mouseCoordY:c}),r(parseFloat((n/l*100).toFixed(2)),parseFloat(o.toFixed(2)),parseFloat(i.toFixed(2)),parseFloat(c.toFixed(2)),t)}})},u=r(3145),c=r(8829),d=r(3264),m=r(3991),f=r(2635),h=r(2762),p=r(2881),g=r(2464),v=r(3896);let w=["red","green","blue","yellow","purple","orange"];var y=e=>{let{isSurvey:t=!1}=e,[r,a]=(0,o.useState)(!1),[l,y]=(0,o.useState)(4),[b,x]=(0,o.useState)(w),[S,T]=(0,o.useState)(0),[E,k]=(0,o.useState)(!1),[j,N]=(0,o.useState)(0),[F,D]=(0,o.useState)(100),[C,_]=(0,o.useState)(100),[A,R]=(0,o.useState)(null),[O,P]=(0,o.useState)({closedWithTimeout:!1,timeTaken:"",bubbleX:[],bubbleY:[],mouseX:[],mouseY:[],colors:[],bubblesPopped:"",bubblesTotal:"",startTime:"",endTime:"",screenHeight:"",screenWidth:"",deviceType:""}),{windowSize:M}=(0,h.Z)(),{state:Y,dispatch:L}=(0,f.y)(),B=(0,s.useSearchParams)();g.Ik.BubblePoppingTask;let U=parseInt(B.get("attempt")||"0"),Z=(0,c.Z)("".concat(v._,"/audio/bubble-pop.mp3")),I=U<3?"".concat(v._,"/").concat(g.fM.surveyRoute,"?attempt=").concat(U+1):null;(0,o.useEffect)(()=>{t&&G()},[t]),(0,o.useEffect)(()=>{M.width&&M.height&&(_(M.width),D(M.height),N(M.width/l))},[M]),(0,o.useEffect)(()=>{M.width&&N(M.width/l),7===l?t?X(W()):alert("you may start the game!"):x(w.slice(0,l))},[l]),(0,o.useEffect)(()=>{(null==A?void 0:A.isTimeOver)&&!E&&(X(),k(!0))},[E,A]);let V=(e,t,r,n,o)=>{P(a=>({...a,bubbleX:[...(null==a?void 0:a.bubbleX)||[],e],bubbleY:[...(null==a?void 0:a.bubbleY)||[],t],mouseX:[...(null==a?void 0:a.mouseX)||[],r],mouseY:[...(null==a?void 0:a.mouseY)||[],n],colors:[...(null==a?void 0:a.colors)||[],o]}))},z=(e,r,n,o,a)=>{Z(),t&&(T(e=>e+1),V(e,r,n,o,a)),x(e=>e.filter(e=>e!==a)),b.length-1==0&&y(e=>e+1)},G=()=>{H();let e=window.screen.width,t=window.screen.height,r=navigator.userAgent;P(n=>({...n,screenHeight:t,screenWidth:e,deviceType:r})),y(1)},q=(0,o.useRef)(),H=()=>{let{endTimePromise:e,stopTimer:t}=(0,m.H)(18e5);return q.current=t,e.then(R),()=>{q.current&&q.current()}},W=(0,o.useCallback)(()=>{if(q.current)return q.current()},[]),X=(0,o.useCallback)(function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(a(!0),console.log({timeData:e}),P(t=>{let n={...t,timeTaken:(null==e?void 0:e.timeTaken)||"",timeLimit:(null==e?void 0:e.timeLimit)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,bubblesTotal:21,bubblesPopped:S,closedMidWay:r};return L({type:"UPDATE_SURVEY_DATA",attempt:U,task:g.fM.id,data:n}),n}))},[t,A,U,S]),K=e=>{let t=e*j+50;return{x:Math.random()*((e+1)*j-100-t)+t,y:Math.random()*(F-100)}};return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[t&&(0,n.jsx)(p.Z,{handlePressAction:()=>{X(W(),!0)}}),(0,n.jsx)(u.default,{src:"".concat(v._,"/image/ocean.jpg"),layout:"fill",objectFit:"cover",alt:"ocean"}),j&&C&&F&&(0,n.jsx)("div",{className:"absolute top-0 left-0 w-full h-full flex items-center justify-center",children:(0,n.jsx)("div",{className:"flex flex-wrap justify-center",children:b.map((e,t)=>(0,n.jsx)(i,{color:e,onClick:z,bubbleSize:100,screenWidth:C,screenHeight:F,initialPosition:K(t)},e))})})]}),t&&(0,n.jsx)(d.Z,{showFilter:r,msg:g.fM.taskEndMessage,testName:g.fM.title,reAttemptUrl:I})]})},b=r(8422);let x=()=>{let[e,t]=(0,o.useState)(!1),r=()=>{t(!e)};return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)(b.Z,{isFullScreen:e,children:(0,n.jsx)(y,{isSurvey:!0})}):(0,n.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,n.jsx)(a.Z,{taskName:g.fM.title,taskMessage:g.fM.taskMessage,handleStartGame:()=>r()}),(0,n.jsx)(y,{})]})})};function S(){return(0,n.jsx)(l.Z,{children:(0,n.jsx)(x,{})})}},2881:function(e,t,r){"use strict";var n=r(7437),o=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,a]=(0,o.useState)(null),l=e=>{r&&r!==e?(console.log("close action will handle"),t(),a(null)):(a(e),setTimeout(()=>{a(null)},5e3))};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>l("top")}),(0,n.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>l("bottom")})]})}},8422:function(e,t,r){"use strict";var n=r(7437),o=r(2265);t.Z=e=>{let{isFullScreen:t,children:r}=e,a=(0,o.useRef)(null);(0,o.useEffect)(()=>{t?l():s()},[t]);let l=async()=>{try{if(a.current){let e=a.current;e.requestFullscreen?await e.requestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Error trying to enter fullscreen mode:",e)}},s=async()=>{try{document.fullscreenElement&&(document.exitFullscreen?await document.exitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen())}catch(e){console.error("Error trying to exit fullscreen mode:",e)}};return(0,n.jsx)("div",{ref:a,style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:r})}},3264:function(e,t,r){"use strict";var n=r(7437),o=r(1100),a=r(9376);t.Z=e=>{let{showFilter:t,msg:r,testName:l,reAttemptUrl:s}=e,i=(0,a.useRouter)();return(0,n.jsx)(o.p,{show:t,slideBottom:!0,children:(0,n.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,n.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(l," Test Completed!!")}),(0,n.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>i.push("/survey"),children:[(0,n.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,n.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,n.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,n.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,n.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,n.jsx)("button",{onClick:()=>i.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),s&&(0,n.jsx)("button",{onClick:()=>{window.location&&(window.location.href=s)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},3896:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});let n=""},6501:function(e,t,r){"use strict";r.d(t,{Y:function(){return o},g:function(){return n}});let n={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},o={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},8829:function(e,t,r){"use strict";var n=r(2265);t.Z=e=>{let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(e){let t=new Audio(e);t.preload="auto",r(t)}return()=>{t&&(t.pause(),t.currentTime=0,t.src="")}},[e]),async()=>{if(t)try{await t.play()}catch(e){console.error("Failed to play the audio:",e)}}}},2762:function(e,t,r){"use strict";r.d(t,{Z:function(){return o}});var n=r(2265);function o(){let[e,t]=(0,n.useState)({width:void 0,height:void 0}),[r,o]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&o(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let a="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,l="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:a,isDesktop:l,deviceType:r}}},2635:function(e,t,r){"use strict";r.d(t,{SurveyProvider:function(){return p},y:function(){return g}});var n=r(7437),o=r(6501);let{childID:a,childDOB:l,childGender:s,observerId:i}=(0,r(7727).jy)(o.g.LOGGED_IN_USER,!0)||{},u=e=>({assestment_id:e,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:""});u("BubblePoppingTask"),u("MotorFollowingTask"),u("ButtonTask");let c=["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]={...u(t),userID:a,userDOB:l,userGender:s,observerId:i},e),{});var d=r(2807),m=r(2265);let f=(0,m.createContext)(void 0),h=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};default:return{...e}}},p=e=>{let{children:t}=e,[r,a]=(0,m.useReducer)(h,c),[l,s]=(0,m.useState)(!1);return(0,m.useEffect)(()=>{(async()=>{try{let e=await (0,d.VS)(o.Y.surveyDB,o.Y.surveyData);e&&!l&&a({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{s(!0)}})()},[l]),(0,m.useEffect)(()=>{l&&(async()=>{try{await (0,d.TP)(o.Y.surveyDB,o.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,l]),(0,n.jsx)(f.Provider,{value:{state:r,dispatch:a},children:t})},g=()=>{let e=(0,m.useContext)(f);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},2807:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,n)=>{let o=indexedDB.open(e,t);o.onsuccess=()=>r(o.result),o.onerror=()=>n("Failed to open database: ".concat(e)),o.onupgradeneeded=()=>{let e=o.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function o(e,t,r){try{let o=await n(e),a=o.transaction("data","readwrite");a.objectStore("data").put(r,t),a.oncomplete=()=>{o.close()},a.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function a(e,t){try{let r=await n(e);return new Promise((n,o)=>{let a=r.transaction("data","readonly").objectStore("data").get(t);a.onsuccess=()=>{let e=a.result;n(e),r.close()},a.onerror=()=>{o("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}async function l(e,t){try{let r=await n(e),o=r.transaction("data","readwrite");o.objectStore("data").delete(t),o.oncomplete=()=>r.close()}catch(t){console.error("Error removing value from ".concat(e,":"),t)}}r.d(t,{TP:function(){return o},VS:function(){return a},pV:function(){return l}}),r(6501)},7727:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function o(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}function a(){"localStorage"in window&&window.localStorage.clear()}r.d(t,{jy:function(){return n},pO:function(){return a},uN:function(){return o}})},3991:function(e,t,r){"use strict";r.d(t,{H:function(){return o}});let n=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),o=e=>{let t;let r=Date.now(),o=n(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let a=t-r;return{startTime:o,endTime:n(t),timeLimit:e,isTimeOver:a>=e,timeTaken:a}}),stopTimer:()=>{clearTimeout(t);let a=Date.now(),l=a-r;return{startTime:o,endTime:n(a),timeLimit:e,isTimeOver:l>=e,timeTaken:l}}}}}},function(e){e.O(0,[972,145,845,75,971,522,744],function(){return e(e.s=6910)}),_N_E=e.O()}]);