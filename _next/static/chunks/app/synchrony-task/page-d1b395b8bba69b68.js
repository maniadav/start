(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[908],{9457:function(e,t,r){Promise.resolve().then(r.bind(r,8532))},8532:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return E}});var n=r(7437),s=r(2265),l=r(3949),a=r(9376),i=r(3264),o=r(3991),c=r(2635),u=r(2762);let d=(0,s.createContext)({drumClicks:[],stickClick:[],drumHit:[],setDrumHit:()=>{},setDrumClicks:()=>{},setStickClicks:()=>{}}),f=e=>{let{children:t}=e,[r,l]=(0,s.useState)([0]),[a,i]=(0,s.useState)([0]),[o,c]=(0,s.useState)([0]);return(0,n.jsx)(d.Provider,{value:{drumClicks:r,setDrumClicks:l,stickClick:a,setStickClicks:i,drumHit:o,setDrumHit:c},children:t})},m=()=>{let e=(0,s.useContext)(d);if(!e)throw Error("component not under context provider");return e};var h=e=>{let{startTime:t,isSurvey:r,isGameActive:l}=e,[a,i]=(0,s.useState)(!0),[o,c]=(0,s.useState)(0),u=(0,s.useRef)(a),{drumClicks:d,setStickClicks:f,setDrumHit:h}=m(),x=[600,400];return(0,s.useEffect)(()=>{u.current=a},[a]),(0,s.useEffect)(()=>{let e;return e=setInterval(()=>{c(e=>e+1<x.length?e+1:0)},15e3),()=>{clearInterval(e)}},[t]),(0,s.useEffect)(()=>{let e;return e=setInterval(()=>{i(e=>!e);let e=parseFloat(((Date.now()-t)/1e3).toFixed(2));r&&l&&(f(t=>[...t,e]),h(e=>[...e,d[d.length-1]||0]))},x[o]),()=>{clearInterval(e)}},[o,r,l,t,d]),(0,n.jsxs)("svg",{width:450,height:450,viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg","aria-hidden":"true",className:"iconify iconify--emojione",transform:"scale(-1 1)",children:[(0,n.jsx)("path",{fill:"#ed4c5c",d:"M60.1 52.1 32 58.5 3.9 52.1V34.2h56.2z"}),(0,n.jsx)("path",{d:"M32 37.7S8.6 37.1 2 27.3V33s3.2 8.5 30 8.5S62 33 62 33v-5.7c-6.6 9.8-30 10.4-30 10.4",fill:"#b2c1c0"}),(0,n.jsx)("path",{d:"M32 16.9c-16.6 0-30 4.7-30 10.4s13.4 10.4 30 10.4S62 33 62 27.3 48.6 16.9 32 16.9",fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M32 56.6S8.6 56 2 46.2v5.7s3.2 8.5 30 8.5 30-8.5 30-8.5v-5.7C55.4 56 32 56.6 32 56.6",fill:"#b2c1c0"}),(0,n.jsx)("path",{d:"M60.1 42.6v3.6c0 5.2-12.6 9.5-28.1 9.5S3.9 51.5 3.9 46.2v-3.6C2.7 43.7 2 44.9 2 46.2c0 5.7 13.4 10.4 30 10.4s30-4.7 30-10.4c0-1.3-.7-2.5-1.9-3.6",fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M32 21.6c13.7 0 25.1 3.3 27.6 7.6.4-.6.6-1.3.6-1.9 0-5.2-12.1-9.5-28.2-9.5S3.9 22.2 3.9 27.3c0 .6.2 1.3.5 1.9 2.6-4.3 14-7.6 27.6-7.6",fill:"#b2c1c0"}),(0,n.jsx)("path",{d:"M32 36.4c14 0 25-3 27.6-7.1-2.5-4.4-13.9-7.6-27.6-7.6-13.6 0-25 3.3-27.6 7.6 2.5 4.1 13.5 7.1 27.6 7.1",fill:a?"yellow":"#fff"}),(0,n.jsx)("path",{d:"M46.5 23.4c-.6-.3-1.2-.5-1.7-.5L8.6 2c-.5-.2-1.9 2.1-1.4 2.4l36.7 20.2c.2.4.7.9 1.2 1.2 3.5 2 4.9-.4 1.4-2.4",fill:"#d3976e",style:{transform:a?"rotateZ(8deg)":"rotateZ(350deg)"}}),(0,n.jsx)("path",{d:"M3.9 53.3v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:6.7,cy:53.3,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M5.8 38.6v14.6c0 .3.4.5.9.5s.9-.2.9-.5V38.6z",fill:"#8a8e91"}),(0,n.jsx)("path",{d:"M3.9 34.4v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:6.7,cy:34.4,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M54.5 53.3v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:57.3,cy:53.3,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M56.4 38.6v14.6c0 .3.4.5.9.5s.9-.2.9-.5V38.6z",fill:"#8a8e91"}),(0,n.jsx)("path",{d:"M54.5 34.4v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:57.3,cy:34.4,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M38.6 57.1v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:41.4,cy:57.1,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M40.4 42.4V57c0 .3.4.5.9.5s.9-.2.9-.5V42.4z",fill:"#8a8e91"}),(0,n.jsx)("path",{d:"M38.6 38.2V42c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:41.4,cy:38.2,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M19.8 57.1v3.8c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:22.6,cy:57.1,rx:2.8,ry:.9,fill:"#e8e8e8"}),(0,n.jsx)("path",{d:"M21.7 42.4V57c0 .3.4.5.9.5s.9-.2.9-.5V42.4z",fill:"#8a8e91"}),(0,n.jsx)("path",{d:"M19.8 38.2V42c0 1.5 5.6 1.5 5.6 0v-3.8z",fill:"#b2c1c0"}),(0,n.jsx)("ellipse",{cx:22.6,cy:38.2,rx:2.8,ry:.9,fill:"#e8e8e8"})]})},x=r(2881),v=r(3896),p=r(8829),y=e=>{let{startTime:t,isSurvey:r,isGameActive:l}=e,[a,i]=(0,s.useState)(!1),{setDrumClicks:o}=m(),c=(0,p.Z)("".concat(v._,"/audio/drum-hit.mp3"));return(0,s.useEffect)(()=>{if(a){let e=setTimeout(()=>{i(!1)},300);return()=>clearTimeout(e)}},[a]),(0,n.jsx)("div",{className:"w-full h-52 ".concat(a?"bg-yellow-300":"bg-gray-200"," highlight:bg-gray-300 border-[10px] border-gray-400 rounded-t-lg cursor-pointer focus:ring"),style:{borderRadius:"50% 50% 50% 50% / 60% 60% 40% 40%"},onClick:()=>{i(!0),c();let e=parseFloat(((Date.now()-t)/1e3).toFixed(2));r&&l&&o(t=>[...t,e])}})},g=r(2464),w=e=>{let{isSurvey:t=!1}=e,[r,l]=(0,s.useState)(!1),[d,f]=(0,s.useState)(!1),[p,w]=(0,s.useState)(!1),[j,S]=(0,s.useState)(0),[b,E]=(0,s.useState)(null),[k,T]=(0,s.useState)({}),{stickClick:N,drumHit:D}=m(),{windowSize:C,deviceType:_}=(0,u.Z)(),{state:F,dispatch:A}=(0,c.y)(),M=(0,a.useSearchParams)(),R=(0,s.useRef)(),z=parseInt(M.get("attempt")||"0"),V=z<3?"".concat(v._,"/").concat(g.j6.surveyRoute,"?attempt=").concat(z+1):null;(0,s.useEffect)(()=>{t&&O()},[t]),(0,s.useEffect)(()=>{(null==b?void 0:b.isTimeOver)&&!p&&(U(b),w(!0))},[p,b]);let O=()=>{S(Date.now()),f(!0),L()},L=()=>{let{endTimePromise:e,stopTimer:t}=(0,o.H)(3e4);return R.current=t,e.then(E),()=>{R.current&&R.current()}},P=(0,s.useCallback)(()=>{if(R.current)return R.current()},[]),U=(0,s.useCallback)(async function(e){let r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t&&(f(!1),l(!0),T(t=>{let n={...t,timeTaken:e.timeTaken,timrLimit:(null==e?void 0:e.timeLimit)||"",endTime:(null==e?void 0:e.endTime)||"",startTime:(null==e?void 0:e.startTime)||"",closedWithTimeout:(null==e?void 0:e.isTimeOver)||!1,screenHeight:C.height,screenWidth:C.width,drumPress:D,stickHit:N,closedMidWay:r,deviceType:_};return A({type:"UPDATE_SURVEY_DATA",attempt:z,task:g.j6.id,data:n}),n}))},[t,b,z,N,D]);return(0,n.jsxs)("div",{className:"relative w-screen h-screen overflow-hidden",children:[t&&(0,n.jsx)(x.Z,{handlePressAction:()=>{U(P(),!0)}}),(0,n.jsxs)("div",{className:"relative w-full h-full flex flex-col justify-center items-center gap-4",children:[(0,n.jsx)("div",{className:"absolute top-24",children:(0,n.jsx)(h,{startTime:j,isSurvey:t,isGameActive:d})}),(0,n.jsx)("div",{className:"w-full px-12 absolute bottom-0 pt-20",children:(0,n.jsx)(y,{startTime:j,isSurvey:t,isGameActive:d})})]}),t&&(0,n.jsx)(i.Z,{showFilter:r,msg:g.j6.taskEndMessage,testName:g.j6.title,reAttemptUrl:V})]})},j=r(1522),S=r(8422);let b=()=>{let[e,t]=(0,s.useState)(!1),r=()=>{t(!e)};return(0,n.jsx)(n.Fragment,{children:e?(0,n.jsx)(S.Z,{isFullScreen:e,children:(0,n.jsx)(w,{isSurvey:!0})}):(0,n.jsxs)("div",{className:"w-full h-full overflow-hidden",children:[(0,n.jsx)(l.Z,{taskName:g.j6.title,taskMessage:g.j6.taskMessage,handleStartGame:()=>r()}),(0,n.jsx)(w,{})]})})};function E(){return(0,n.jsx)(j.Z,{children:(0,n.jsx)(f,{children:(0,n.jsx)(b,{})})})}},2881:function(e,t,r){"use strict";var n=r(7437),s=r(2265);t.Z=e=>{let{handlePressAction:t}=e,[r,l]=(0,s.useState)(null),a=e=>{r&&r!==e?(console.log("close action will handle"),t(),l(null)):(l(e),setTimeout(()=>{l(null)},5e3))};return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"z-50 fixed right-0 top-0 p-3 cursor-pointer w-16 h-16 ",onClick:()=>a("top")}),(0,n.jsx)("div",{className:"z-50 fixed right-0 bottom-0 p-3 cursor-pointer w-16 h-16",onClick:()=>a("bottom")})]})}},8422:function(e,t,r){"use strict";var n=r(7437),s=r(2265);t.Z=e=>{let{isFullScreen:t,children:r}=e,l=(0,s.useRef)(null);(0,s.useEffect)(()=>{t?a():i()},[t]);let a=async()=>{try{if(l.current){let e=l.current;e.requestFullscreen?await e.requestFullscreen():e.mozRequestFullScreen?await e.mozRequestFullScreen():e.webkitRequestFullscreen?await e.webkitRequestFullscreen():e.msRequestFullscreen&&await e.msRequestFullscreen()}}catch(e){console.error("Error trying to enter fullscreen mode:",e)}},i=async()=>{try{document.fullscreenElement&&(document.exitFullscreen?await document.exitFullscreen():document.mozCancelFullScreen?await document.mozCancelFullScreen():document.webkitExitFullscreen?await document.webkitExitFullscreen():document.msExitFullscreen&&await document.msExitFullscreen())}catch(e){console.error("Error trying to exit fullscreen mode:",e)}};return(0,n.jsx)("div",{ref:l,style:{height:"100vh",width:"100vw",backgroundColor:"#f0f0f0"},children:r})}},3264:function(e,t,r){"use strict";var n=r(7437),s=r(1100),l=r(9376);t.Z=e=>{let{showFilter:t,msg:r,testName:a,reAttemptUrl:i}=e,o=(0,l.useRouter)();return(0,n.jsx)(s.p,{show:t,slideBottom:!0,children:(0,n.jsx)("div",{className:"fixed top-0 right-0 left-0 botom-0  w-full h-full flex items-center align-middle justify-center align-center overflow-y-auto bg-black",children:(0,n.jsx)("div",{className:"relative p-4 w-full max-w-xl max-h-full",children:(0,n.jsxs)("div",{className:"relative bg-white rounded-lg shadow ",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between p-4 md:p-5 border-b rounded-t dark:border-gray-600",children:[(0,n.jsx)("h3",{className:"text-xl capitalize text-center font-semibold text-gray-900",children:"Hurray, ".concat(a," Test Completed!!")}),(0,n.jsxs)("button",{className:"text-gray-400 bg-transparent hover:bg-gray-200 hover:text-gray-900 rounded-lg text-sm w-8 h-8 ms-auto inline-flex justify-center items-center dark:hover:bg-gray-600 dark:hover:text-white",onClick:()=>o.push("/survey"),children:[(0,n.jsx)("svg",{className:"w-3 h-3",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 14 14",children:(0,n.jsx)("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"m1 1 6 6m0 0 6 6M7 7l6-6M7 7l-6 6"})}),(0,n.jsx)("span",{className:"sr-only",children:"Close modal"})]})]}),(0,n.jsx)("div",{className:"p-4 md:p-5 space-y-4",children:(0,n.jsx)("p",{className:"text-base leading-relaxed text-gray-300 dark:text-gray-600 flex gap-2",children:r})}),(0,n.jsxs)("div",{className:"flex items-center p-4 md:p-5 border-t border-gray-200 rounded-b dark:border-gray-600",children:[(0,n.jsx)("button",{onClick:()=>o.push("/survey"),className:"capitalize  text-white bg-red-700 hover:bg-red-800 focus:ring-4 focus:outline-none focus:ring-red-300 font-medium rounded-lg text-sm px-5 py-2.5 text-center  dark:hover:bg-red-700 dark:focus:ring-red-800",children:"Go to Dashboard"}),i&&(0,n.jsx)("button",{onClick:()=>{window.location&&(window.location.href=i)},className:"cursor-pointer ms-3 text-gray-200 bg-gray-800 hover:bg-gray-700 focus:ring-4 focus:outline-none focus:ring-red-300 rounded-lg border border-gray-200 text-sm font-medium px-5 py-2.5",children:"Create New Attempt"})]})]})})})})}},3896:function(e,t,r){"use strict";r.d(t,{_:function(){return n}});let n="/start"},6501:function(e,t,r){"use strict";r.d(t,{Y:function(){return s},g:function(){return n}});let n={LOGGED_IN_USER:"start_user",MFA_ACCESS_TOKEN:"x-secure-token",MFA_REFRESH_TOKEN:"x-refresh-token",SELECTED_COUNTRY:"psychSelectedCountry",SELECTED_COUNTRY_NAME:"psychSelectedCountryName",SELECTED_VENDORCODE:"psychSelectedVendorCode",SELECTED_LANGUAGE:"psychSelectedLanguageFilter",BASE_URL:"https://x3qrf2-3000.csb.app/api/v1",SURVEY_DATA:"surveyData"},s={surveyDB:"survey",surveyData:"surveyData",useData:"user",tempVideo:"tempVideo",temporaryDB:"temporary"}},8829:function(e,t,r){"use strict";var n=r(2265);t.Z=e=>{let[t,r]=(0,n.useState)(null);return(0,n.useEffect)(()=>{if(e){let t=new Audio(e);t.preload="auto",r(t)}return()=>{t&&(t.pause(),t.currentTime=0,t.src="")}},[e]),async()=>{if(t)try{await t.play()}catch(e){console.error("Failed to play the audio:",e)}}}},2762:function(e,t,r){"use strict";r.d(t,{Z:function(){return s}});var n=r(2265);function s(){let[e,t]=(0,n.useState)({width:void 0,height:void 0}),[r,s]=(0,n.useState)(void 0);(0,n.useEffect)(()=>{let e=()=>{t({width:window.innerWidth,height:window.innerHeight})};return"undefined"!=typeof navigator&&s(navigator.userAgent),window.addEventListener("resize",e),e(),()=>window.removeEventListener("resize",e)},[]);let l="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)<768,a="number"==typeof(null==e?void 0:e.width)&&(null==e?void 0:e.width)>=768;return{windowSize:e,isMobile:l,isDesktop:a,deviceType:r}}},2635:function(e,t,r){"use strict";r.d(t,{SurveyProvider:function(){return d},y:function(){return f}});var n=r(7437),s=r(6501),l=r(7727);let a=()=>{let{childID:e,childDOB:t,childGender:r,observerID:n}=(0,l.jy)(s.g.LOGGED_IN_USER,!0)||{},a=s=>({assessment_id:s,noOfAttempt:0,attempt1:{},attempt2:{},attempt3:{},userID:e,userDOB:t,userGender:r,observerID:n});return["BubblePoppingTask","DelayedGratificationTask","MotorFollowingTask","ButtonTask","SynchronyTask","LanguageSamplingTask","WheelTask","PreferentialLookingTask"].reduce((e,t)=>(e[t]=a(t),e),{})};var i=r(2807),o=r(2265);let c=(0,o.createContext)(void 0),u=(e,t)=>{switch(t.type){case"SET_SURVEY_DATA":return{...e,...t.payload};case"UPDATE_SURVEY_DATA":var r;return{...e,[t.task]:{...e[t.task],noOfAttempt:t.attempt,["attempt".concat(t.attempt)]:{...null===(r=e[t.task])||void 0===r?void 0:r["attempt".concat(null==t?void 0:t.attempt)],...t.data}}};case"RESET_SURVEY_DATA":return a();default:return{...e}}},d=e=>{let{children:t}=e,[r,l]=(0,o.useReducer)(u,a()),[d,f]=(0,o.useState)(!1);return(0,o.useEffect)(()=>{(async()=>{try{let e=await (0,i.VS)(s.Y.surveyDB,s.Y.surveyData);e&&!d&&l({type:"SET_SURVEY_DATA",payload:e})}catch(e){console.error("Failed to load persisted survey state:",e)}finally{f(!0)}})()},[d]),(0,o.useEffect)(()=>{d&&(async()=>{try{await (0,i.TP)(s.Y.surveyDB,s.Y.surveyData,r)}catch(e){console.error("Failed to save survey state:",e)}})()},[r,d]),(0,n.jsx)(c.Provider,{value:{state:r,dispatch:l},children:t})},f=()=>{let e=(0,o.useContext)(c);if(!e)throw Error("useSurveyContext must be used within a SurveyProvider");return e}},2807:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return new Promise((r,n)=>{let s=indexedDB.open(e,t);s.onsuccess=()=>r(s.result),s.onerror=()=>n("Failed to open database: ".concat(e)),s.onupgradeneeded=()=>{let e=s.result;e.objectStoreNames.contains("data")||e.createObjectStore("data")}})}async function s(e,t,r){try{let s=await n(e),l=s.transaction("data","readwrite");l.objectStore("data").put(r,t),l.oncomplete=()=>{s.close()},l.onerror=t=>{console.error("Transaction error in ".concat(e,":"),t)}}catch(t){console.error("Error setting value in ".concat(e,":"),t)}}async function l(e,t){try{let r=await n(e);return new Promise((n,s)=>{let l=r.transaction("data","readonly").objectStore("data").get(t);l.onsuccess=()=>{let e=l.result;n(e),r.close()},l.onerror=()=>{s("Failed to retrieve data from ".concat(e)),r.close()}})}catch(t){return console.error("Error getting value from ".concat(e,":"),t),null}}async function a(e,t){try{let r=await n(e),s=r.transaction("data","readwrite");s.objectStore("data").delete(t),s.oncomplete=()=>r.close()}catch(t){console.error("Error removing value from ".concat(e,":"),t)}}r.d(t,{TP:function(){return s},VS:function(){return l},pV:function(){return a}}),r(6501)},7727:function(e,t,r){"use strict";function n(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("localStorage"in window)try{let r=window.localStorage.getItem(e);if(!r)return null;if(!t)return r;if(r)return JSON.parse(r)}catch(e){}return null}function s(e,t,r){if("localStorage"in window)try{r?window.localStorage.setItem(e,JSON.stringify(t)):"string"==typeof t&&window.localStorage.setItem(e,t)}catch(e){console.log(e)}return null}function l(){"localStorage"in window&&window.localStorage.clear()}r.d(t,{jy:function(){return n},pO:function(){return l},uN:function(){return s}})},3991:function(e,t,r){"use strict";r.d(t,{H:function(){return s}});let n=e=>new Date(new Date(e).getTime()).toLocaleString("en-IN",{timeZone:"Asia/Kolkata",hour12:!0}),s=e=>{let t;let r=Date.now(),s=n(r);return{endTimePromise:new Promise(r=>{t=setTimeout(()=>{r(Date.now())},e)}).then(t=>{let l=t-r;return{startTime:s,endTime:n(t),timeLimit:e,isTimeOver:l>=e,timeTaken:l}}),stopTimer:()=>{clearTimeout(t);let l=Date.now(),a=l-r;return{startTime:s,endTime:n(l),timeLimit:e,isTimeOver:a>=e,timeTaken:a}}}}}},function(e){e.O(0,[972,845,75,971,522,744],function(){return e(e.s=9457)}),_N_E=e.O()}]);